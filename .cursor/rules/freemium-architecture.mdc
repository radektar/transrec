---
title: "Transrec - Freemium Architecture"
description: "Guidelines for FREE/PRO feature development"
globs: "src/**/*.py"
alwaysApply: true
---

# Freemium Model - FREE vs PRO

## Feature Tiers

### FREE (GitHub Download)
- âœ… Wykrywanie podÅ‚Ä…czenia dysku
- âœ… Skanowanie plikÃ³w audio
- âœ… Transkrypcja (whisper.cpp lokalnie)
- âœ… Zapis do Markdown
- âœ… Settings UI
- âœ… Menu bar app

### PRO (License Required)
- ğŸ”’ AI Summaries (Claude API)
- ğŸ”’ Auto-tagging
- ğŸ”’ Auto-title generation
- ğŸ”’ Cloud sync (Obsidian)
- ğŸ”’ Priority support

## Feature Flags Implementation

Wszystkie funkcje PRO MUSZÄ„ byÄ‡ kontrolowane przez `FeatureFlags`:

```python
from src.license_manager import license_manager

# Sprawdzenie przed uÅ¼yciem funkcji PRO
if license_manager.can_use_feature("summaries"):
    summary = self.summarizer.summarize(text)
else:
    logger.info("Summaries require PRO license")
    summary = None
```

## Struktura kodu

```
src/
â”œâ”€â”€ core/           # Wszystkie tier (FREE+PRO)
â”‚   â”œâ”€â”€ file_monitor.py
â”‚   â”œâ”€â”€ transcriber.py
â”‚   â””â”€â”€ markdown_generator.py
â”œâ”€â”€ pro/            # Tylko PRO features
â”‚   â”œâ”€â”€ summarizer.py      # z feature flag check
â”‚   â”œâ”€â”€ tagger.py          # z feature flag check
â”‚   â””â”€â”€ cloud_sync.py      # z feature flag check
â”œâ”€â”€ license_manager.py     # ZarzÄ…dzanie licencjÄ…
â”œâ”€â”€ feature_flags.py       # Definicje flag
â””â”€â”€ config.py              # Konfiguracja
```

## Zasady developmentu

1. **Feature flags NA POCZÄ„TKU** - dodaj check przed implementacjÄ…
2. **Graceful degradation** - bez PRO dziaÅ‚a, tylko bez premium
3. **UI feedback** - pokazuj uÅ¼ytkownikowi co wymaga PRO
4. **Nie blokuj FREE flow** - transkrypcja musi dziaÅ‚aÄ‡ zawsze
5. **Loguj usage** - zbieraj info o uÅ¼ywanych funkcjach (za zgodÄ…)

## Weryfikacja licencji

```python
# license_manager.py - cache locally, verify periodically
class LicenseManager:
    def verify_license(self) -> bool:
        """Verifies license with backend or from cache."""
        # 1. Check cache (valid for 7 days offline)
        # 2. If online, verify with backend
        # 3. Update cache with result
```

## Backend API (transrec-backend)

PRO features wymagajÄ… poÅ‚Ä…czenia z backendem:
- `/api/v1/summarize` - AI summaries
- `/api/v1/tags` - Auto-tagging
- `/api/v1/title` - Title generation
- `/api/v1/license/verify` - License check

## Repozytoria

```
transrec        (public)  â† Main app (FREE + PRO client)
transrec-backend (private) â† Backend API for PRO
transrec.app    (public)  â† Marketing website (optional)
```

## Do NOT

- âŒ Nie dodawaj hardcoded API keys
- âŒ Nie implementuj PRO logic bez feature flag
- âŒ Nie blokuj transkrypcji gdy brak licencji
- âŒ Nie pushuj secrets do repo
